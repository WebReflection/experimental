<!doctype html>
<html manifest="cache.manifest.php">
  <head>
    <title>experimental.js</title>
    <meta http-equiv="content-language" content="en-US"/>
    <meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no"/>
    <meta name="apple-mobile-web-app-capable" content="yes"/>
    <meta names="apple-mobile-web-app-status-bar-style" content="black"/>
    <meta name="description" content="minimalistic features detection"/>
    <meta name="keywords" content="javascript,feature,detection,experimental"/>
    <meta name="category" content="SW development"/>
    <meta name="copyright" content="Andrea Giammarchi"/>
    <meta name="author" content="Andrea Giammarchi"/>
    <meta name="generator" content="TextMate"/>
    <meta name="robots" content="ALL"/>
    <style>
    body, input {
      font-family: sans-serif;
      font-size: 16px;
    }
    body {
      text-align: center;
    }
    input, div, a {
      margin: 32px auto;
    }
    div {
      margin-top: 16px;
      font-weight: bold;
      font-size: 18px;
      height: 36px;
    }
    a {
      font-size: 14px;
      font-style: italic;
      text-decoration: none;
    }
    </style>
    <script>
    /*! (C) Andrea Giammarchi - Mit Style License */
    var define=define||Object,exports=this.exports||this;define(exports.experimental=function(e){var f="Khtml khtml O o MS ms Moz moz WebKit Webkit webKit webkit ".split(" "),j=e.hasOwnProperty;return function(c,d,k){var a;if(!(a=e[d])){a:{a=d;var g=a.charAt(0);a=a.slice(1);for(var h=f.length,b;h--;)if(b=f[h],b+=(b?g.toUpperCase():g)+a,b in c||("on"+b).toLowerCase()in c){a=b;break a}a=void 0}a=e[d]=a}k&&(a&&!j.call(c,d))&&(c[d]=c[a]);return a}}({}));
    this.onload = function () {
      var
        $ = function (name) {
          return document.getElementsByTagName(name);
        },
        keydown = function (e) {
          input.placeholder = ""; // buggy in some device
          clearTimeout(timer);
          timer = setTimeout(findOut, 750);
          if (style[opacity]) {
            style[opacity] = 0;
          }
        },
        lastChance = function (value) {
          try {
            return Function("return " + value)();
          } catch(o_O) {}
        },
        findOut = function () {
          value = input.value.replace(trim, "");
          while (div.hasChildNodes()) {
            div.removeChild(div.lastChild);
          }
          if (value) {
            div.appendChild(
              document.createTextNode(
                experimental(window, value) ||
                experimental(document, value) ||
                experimental(document.documentElement, value) ||
                experimental(input, value) ||
                experimental(style, value) ||
                experimental(navigator, value) ||
                experimental(Array.prototype, value) ||
                experimental(Boolean.prototype, value) ||
                experimental(Date.prototype, value) ||
                experimental(Function.prototype, value) ||
                experimental(Number.prototype, value) ||
                experimental(Object.prototype, value) ||
                experimental(String.prototype, value) ||
                lastChance(value) ||
                "[not found]"
              )
            );
            style[opacity] = 1;
          }
        },
        trim = /^\s+|\s+$/g,
        body = $("body")[0],
        input = $("input")[0],
        div = $("div")[0],
        style = div.style,
        opacity = experimental(style, "opacity"),
        timer, value
      ;
      style[opacity] = 0;
      div.appendChild(document.createTextNode(" "));
      style[
        experimental(style, "transition")
      ] = opacity + " .5s ease-out";
      input.addEventListener(
        "keydown",
        keydown,
        true
      );
      /(?:#|\?)(.+)$/.test(location.href) && (
        input.value = RegExp.$1
      ) && setTimeout(findOut, 1000);
    };
    </script>
  </head>
  <body>
    <input placeholder="write a feature" />
    <div></div>
    <a href="https://github.com/WebReflection/experimental#experimental">experimental.js</a>
  </body>
</html>